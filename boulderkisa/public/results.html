<html>
    <head>
        <title>25th year anniversary competition</title>
    
        <link rel="stylesheet" href="styles.css">
        <script>
        
        const Http = new XMLHttpRequest();
        const url='/result_json';
        Http.open("GET", url);
        Http.send();

        Http.onreadystatechange = (e) => {

            var result = JSON.parse(Http.responseText);

            document.getElementById("resultsMen").innerHTML = ""
            var html = "<table> ";
            html +="  <tr> <th>Rank</th>    <th>Climber</th>   <th>Score</th> <th>Attempts</th>  <th>Number of ascents</th>  </td>"

            // Loop through array and add table cells
            for (var i=0; i<result["Men"].length; i++) {
                html +="  <tr> "
                html += "<td>" + String(i+1)+ "</td>";
                html += "<td>" + result["Men"][i][0]["wholename"]+ "</td>";
                html += "<td>" + String(Number( parseFloat( result["Men"][i][1]).toFixed(2)))+ " </td>";
                html += "<td>" + result["Men"][i][3]+ " </td>";

                html += "<td>" + result["Men"][i][2] + "</td>";
                html +=" </tr> "

                // Break into next row

            }
            html += "</tr></table>";


            document.getElementById("resultsMen").innerHTML = html

            


            document.getElementById("resultsWomen").innerHTML = ""
            html = "<table> ";
                html +="  <tr> <th>Rank</th>    <th>Climber</th>   <th>Score</th> <th>Attempts</th>  <th>Number of ascents</th>  </td>"

            // Loop through array and add table cells
            for (var i=0; i<result["Women"].length; i++) {
                html +="  <tr> "
                html += "<td>" + String(i+1)+ "</td>";
                html += "<td>" + result["Women"][i][0]["wholename"]+ "</td>";
                html += "<td>" + String(Number( parseFloat( result["Women"][i][1]).toFixed(2)))+ " </td>";
                html += "<td>" + result["Women"][i][3]+ " </td>";
                html += "<td>" + result["Women"][i][2] + "</td>";
                html +=" </tr> "

                // Break into next row

            }
            html += "</tr></table>";


            document.getElementById("resultsWomen").innerHTML = html



        }



        </script>
    </head>
    <body>


        
        <div >
            <h1>25th year anniversary competition</h1>
        </div>

        <div class="navbar">
            <a class="active" href="/results">Results</a>
            <a href="/modify">Add or remove ascents</a>
            <a href="/info" >Info</a>

            <a href="/signup">Sign Up</a>

            

            <a class="onRight" href="/logout">Log Out</a>
        </div>




        <div>
            <h1>Results</h1>
            <div id="resultWrapper">
                <h3>Men:</h3>
                <div id="resultsMen">
                    Men's results
                </div>
                <br>
                <h3>Women:</h3>
                <div id="resultsWomen">
                    Women's results
                </div>
            </div>
        </div>

    </body>
</html>